<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kartu Anggota PKBM Celah Cahaya</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body class="bg-gradient-to-br from-blue-50 to-white min-h-screen flex items-center justify-center px-4">
  <div class="w-full max-w-4xl bg-white shadow-xl rounded-lg p-6">
    <h1 class="text-3xl font-bold text-center text-blue-700 mb-6">Formulir Kartu Anggota</h1>

    <form id="formKartu" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
  <div>
    <label for="nama" class="block text-sm font-medium text-gray-700">Nama Lengkap</label>
    <input type="text" id="nama" name="nama" class="input" placeholder="Contoh: Ruli Lesmana" required>
  </div>

  <div>
    <label for="nik" class="block text-sm font-medium text-gray-700">NIK</label>
    <input type="text" id="nik" name="nik" class="input" placeholder="Contoh: 3205xxxxxxx" required>
  </div>

  <div>
    <label for="ttl" class="block text-sm font-medium text-gray-700">Tempat, Tanggal Lahir</label>
    <input type="text" id="ttl" name="ttl" class="input" placeholder="Contoh: Garut, 14 September 1987" required>
  </div>

  <div>
    <label for="alamat" class="block text-sm font-medium text-gray-700">Alamat Lengkap</label>
    <input type="text" id="alamat" name="alamat" class="input" placeholder="Contoh: Kp. Sukawangi RT.01..." required>
  </div>

  <div>
    <label for="program" class="block text-sm font-medium text-gray-700">Program</label>
    <select id="program" name="program" class="input" required>
      <option value="" disabled selected>Pilih Program</option>
      <option value="Paket B">Paket B</option>
      <option value="Paket C">Paket C</option>
    </select>
  </div>

  <div>
    <label for="tahun" class="block text-sm font-medium text-gray-700">Tahun Ajaran</label>
    <input type="text" id="tahun" name="tahun" class="input" placeholder="Contoh: 2025" required>
  </div>

  <div class="md:col-span-2">
    <label for="foto" class="block text-sm font-medium text-gray-700">Upload Foto</label>
    <input type="file" id="foto" name="foto" accept="image/*" class="input" required>
  </div>
</form>


    <div class="flex flex-wrap justify-center gap-4 mb-6">
      <button onclick="generateCard()" class="btn-blue">Lihat Kartu</button>
      <button onclick="downloadCard()" class="btn-green">Download Kartu</button>
    </div>

    <!-- Preview Kartu -->
<div class="flex justify-center overflow-x-auto mt-6">
  <div id="idCard" class="relative w-[318px] h-[200px] rounded shadow border overflow-hidden bg-white text-[10px]">
    <img id="cardFoto" class="absolute top-14 left-2 w-20 h-24 object-cover border bg-gray-200" src="" alt="Foto" />
    <div class="absolute top-14 left-24 text-xs leading-tight space-y-[2px] text-gray-800">
      <p><strong>Nama:</strong> <span id="outNama">-</span></p>
      <p><strong>NIK:</strong> <span id="outNik">-</span></p>
      <p><strong>TTL:</strong> <span id="outTtl">-</span></p>
      <p><strong>Alamat:</strong> <span id="outAlamat">-</span></p>
      <p><strong>Program:</strong> <span id="outProgram">-</span></p>
      <p><strong>Tahun:</strong> <span id="outTahun">-</span></p>
    </div>
  </div>
</div>


  <script src="html2canvas.min.js"></script>
  <script>
  function generateCard() {
    const form = document.forms['formKartu'];

    document.getElementById('outNama').textContent = form['nama'].value;
    document.getElementById('outNik').textContent = form['nik'].value;
    document.getElementById('outTtl').textContent = form['ttl'].value;
    document.getElementById('outAlamat').textContent = form['alamat'].value;
    document.getElementById('outProgram').textContent = form['program'].value;
    document.getElementById('outTahun').textContent = form['tahun'].value;

    const fotoInput = document.getElementById('foto');
    const cardFoto = document.getElementById('cardFoto');

    if (fotoInput.files.length > 0) {
      const reader = new FileReader();
      reader.onload = function (e) {
        cardFoto.src = e.target.result;
      };
      reader.readAsDataURL(fotoInput.files[0]);
    }
  }

  function downloadCard() {
    const card = document.getElementById('idCard');
    html2canvas(card, {
      scale: 3,
      width: 318,
      height: 200
    }).then(canvas => {
      const link = document.createElement('a');
      link.download = 'Kartu_PKBM_CelahCahaya.png';
      link.href = canvas.toDataURL('image/png');
      link.click();
    });
  }
</script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</body>
</html>
